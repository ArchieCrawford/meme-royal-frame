<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meme Royal 3D</title>
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.164.1/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.164.1/examples/jsm/"
        }
      }
    </script>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        font-family: 'Arial', sans-serif;
      }
      #game-canvas {
        display: block;
        width: 100vw;
        height: 100vh;
      }
      #ui-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }
      #timer {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px 20px;
        border-radius: 10px;
        font-size: 24px;
        font-weight: bold;
        pointer-events: none;
      }
      #elixir {
        position: absolute;
        bottom: 200px;
        right: 20px;
        background: rgba(155, 89, 182, 0.9);
        color: white;
        padding: 15px;
        border-radius: 10px;
        font-size: 24px;
        font-weight: bold;
        border: 3px solid #8e44ad;
        pointer-events: none;
      }
      #crowns {
        position: absolute;
        top: 20px;
        left: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        pointer-events: none;
      }
      .crown-counter {
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px 15px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: bold;
      }
      #card-deck {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        pointer-events: all;
      }
      .card {
        width: 90px;
        background: rgba(44, 62, 80, 0.95);
        border: 3px solid #34495e;
        border-radius: 10px;
        padding: 10px;
        cursor: grab;
        transition: all 0.2s;
        pointer-events: all;
        position: relative;
      }
      .card:hover {
        background: rgba(52, 73, 94, 0.95);
        transform: translateY(-5px);
      }
      .card:active {
        cursor: grabbing;
      }
      .card.dragging {
        opacity: 0.5;
        transform: scale(0.95);
        cursor: grabbing;
      }
      .card.deployed-flash {
        animation: deployFlash 0.3s ease-out;
      }
      @keyframes deployFlash {
        0% { 
          background: rgba(46, 204, 113, 0.95);
          transform: scale(1.2);
        }
        100% { 
          background: rgba(44, 62, 80, 0.95);
          transform: scale(1);
        }
      }
      .card.selected {
        background: rgba(52, 152, 219, 0.95);
        border-color: #3498db;
        transform: scale(1.1);
      }
      .card.disabled {
        opacity: 0.4;
        cursor: not-allowed;
        pointer-events: none;
      }
      .card.disabled:hover {
        transform: none;
      }
      .card img {
        width: 100%;
        height: 70px;
        object-fit: contain;
      }
      .card-cost {
        position: absolute;
        top: 5px;
        left: 5px;
        background: #9b59b6;
        color: white;
        border-radius: 50%;
        width: 25px;
        height: 25px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: bold;
      }
      .card-name {
        color: white;
        font-size: 10px;
        text-align: center;
        margin-top: 5px;
        word-wrap: break-word;
      }
      .ability-cooldown-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 10px;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: bold;
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        pointer-events: none;
        z-index: 10;
      }
      #game-over {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        pointer-events: all;
      }
      #game-over.show {
        display: flex;
      }
      #game-over h1 {
        font-size: 60px;
        margin: 0;
        color: white;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
      }
      #game-over button {
        margin-top: 30px;
        padding: 15px 40px;
        font-size: 24px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-weight: bold;
      }
      #game-over button:hover {
        background: #2980b9;
      }

      /* Main Menu */
      #main-menu {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
      }

      .menu-container {
        text-align: center;
        padding: 40px;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 20px;
        border: 2px solid #3498db;
        box-shadow: 0 0 40px rgba(52, 152, 219, 0.4);
      }

      .game-title {
        font-size: 48px;
        color: #fff;
        text-shadow: 0 0 20px #3498db, 0 0 40px #9b59b6;
        margin-bottom: 30px;
        font-weight: bold;
      }

      .player-info {
        background: rgba(52, 152, 219, 0.2);
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 30px;
      }

      .player-name-display {
        font-size: 28px;
        color: #fff;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .player-stats {
        display: flex;
        gap: 20px;
        justify-content: center;
        color: #fff;
        font-size: 16px;
      }

      .menu-btn {
        width: 300px;
        padding: 15px;
        margin: 10px;
        font-size: 20px;
        font-weight: bold;
        background: linear-gradient(135deg, #3498db, #2980b9);
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
      }

      .menu-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(52, 152, 219, 0.6);
      }

      .menu-btn.secondary {
        background: linear-gradient(135deg, #555, #333);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
      }

      /* Matchmaking Screen */
      #matchmaking-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
      }

      .matchmaking-container {
        text-align: center;
        padding: 40px;
      }

      .matchmaking-title {
        font-size: 36px;
        color: #fff;
        margin-bottom: 30px;
        text-shadow: 0 0 20px #3498db;
      }

      .matchmaking-spinner {
        width: 100px;
        height: 100px;
        margin: 30px auto;
      }

      .spinner {
        width: 100%;
        height: 100%;
        border: 8px solid rgba(52, 152, 219, 0.3);
        border-top: 8px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      .matchmaking-status {
        color: #fff;
        font-size: 18px;
        margin-bottom: 30px;
      }

      /* Match Found Screen */
      #match-found-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
      }

      .match-found-container {
        text-align: center;
      }

      .match-found-title {
        font-size: 48px;
        color: #44ff44;
        text-shadow: 0 0 30px #44ff44;
        margin-bottom: 40px;
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }

      .vs-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 50px;
        margin-bottom: 30px;
      }

      .player-card {
        background: rgba(52, 152, 219, 0.3);
        padding: 30px;
        border-radius: 20px;
        border: 3px solid #3498db;
        min-width: 200px;
      }

      .player-card.enemy {
        border-color: #e74c3c;
        background: rgba(231, 76, 60, 0.3);
      }

      .player-avatar {
        font-size: 64px;
        margin-bottom: 10px;
      }

      .player-name {
        font-size: 24px;
        color: #fff;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .player-trophies {
        color: #fff;
        font-size: 18px;
      }

      .vs-text {
        font-size: 48px;
        color: #fff;
        font-weight: bold;
        text-shadow: 0 0 20px #fff;
      }

      .battle-starting {
        color: #fff;
        font-size: 20px;
        animation: blink 1s infinite;
      }

      @keyframes blink {
        0%, 50%, 100% { opacity: 1; }
        25%, 75% { opacity: 0.5; }
      }

      /* Name Modal */
      #name-modal {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 200;
      }

      .modal-content {
        background: linear-gradient(135deg, #2c3e50, #34495e);
        padding: 40px;
        border-radius: 20px;
        border: 3px solid #3498db;
        text-align: center;
        min-width: 400px;
      }

      .modal-content h2 {
        color: #fff;
        margin-bottom: 20px;
        font-size: 28px;
      }

      #name-input {
        width: 100%;
        padding: 15px;
        font-size: 18px;
        border-radius: 10px;
        border: 2px solid #3498db;
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
        margin-bottom: 20px;
        text-align: center;
      }

      #name-input:focus {
        outline: none;
        border-color: #9b59b6;
        box-shadow: 0 0 15px rgba(155, 89, 182, 0.5);
      }

      .modal-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
      }

      /* Rewards */
      .rewards-container {
        display: flex;
        gap: 30px;
        justify-content: center;
        margin: 30px 0;
      }

      .reward-item {
        background: rgba(52, 152, 219, 0.2);
        padding: 20px 30px;
        border-radius: 15px;
        border: 2px solid #3498db;
      }

      .reward-label {
        display: block;
        color: #aaa;
        font-size: 14px;
        margin-bottom: 5px;
      }

      .reward-value {
        display: block;
        color: #44ff44;
        font-size: 24px;
        font-weight: bold;
      }

      /* Battle UI adjustments */
      #battle-ui #crowns {
        gap: 20px;
      }

      #battle-ui .crown-counter {
        font-size: 16px;
        line-height: 1.4;
      }

      /* Upgrade Screen */
      #upgrade-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        display: none;
        flex-direction: column;
        z-index: 100;
        overflow-y: auto;
      }

      .upgrade-header {
        padding: 20px;
        background: rgba(0, 0, 0, 0.5);
        border-bottom: 2px solid #3498db;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 101;
      }

      .upgrade-title {
        font-size: 32px;
        color: #fff;
        font-weight: bold;
        text-shadow: 0 0 20px #3498db;
      }

      .upgrade-info {
        display: flex;
        gap: 30px;
        align-items: center;
      }

      .upgrade-gold-display {
        font-size: 24px;
        color: #f39c12;
        font-weight: bold;
      }

      #cards-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 30px;
        justify-content: center;
        align-items: flex-start;
      }

      .upgrade-card {
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .upgrade-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
      }

      /* Deck Builder */
      #deck-builder-screen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        display: none;
        flex-direction: column;
        z-index: 100;
        overflow-y: auto;
      }

      .deck-builder-header {
        padding: 20px;
        background: rgba(0, 0, 0, 0.5);
        border-bottom: 2px solid #3498db;
        position: sticky;
        top: 0;
        z-index: 101;
      }

      .deck-builder-title {
        font-size: 32px;
        color: #fff;
        font-weight: bold;
        text-shadow: 0 0 20px #3498db;
        text-align: center;
        margin-bottom: 15px;
      }

      #deck-tabs {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: 15px;
      }

      .deck-tab {
        padding: 12px 25px;
        background: rgba(52, 73, 94, 0.8);
        border: 2px solid #34495e;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
      }

      .deck-tab:hover {
        background: rgba(52, 73, 94, 1);
        transform: translateY(-2px);
      }

      .deck-tab.editing {
        background: rgba(52, 152, 219, 0.8);
        border-color: #3498db;
      }

      .deck-tab.active-deck {
        border-color: #f39c12;
      }

      .deck-tab-name {
        color: #fff;
        font-size: 16px;
        font-weight: bold;
        margin-bottom: 3px;
      }

      .deck-tab-status {
        color: #f39c12;
        font-size: 12px;
        font-weight: bold;
      }

      .deck-builder-content {
        padding: 30px;
        display: flex;
        flex-direction: column;
        gap: 30px;
      }

      .selected-cards-section {
        background: rgba(0, 0, 0, 0.3);
        padding: 25px;
        border-radius: 15px;
        border: 2px solid #3498db;
      }

      .section-title {
        color: #fff;
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      #selected-cards-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .deck-slot {
        background: rgba(44, 62, 80, 0.95);
        border: 3px solid #34495e;
        border-radius: 12px;
        padding: 12px;
        min-height: 180px;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        transition: all 0.2s;
      }

      .deck-slot img {
        width: 100%;
        height: 90px;
        object-fit: contain;
        margin-bottom: 10px;
      }

      .deck-slot-name {
        color: #fff;
        font-size: 12px;
        font-weight: bold;
        text-align: center;
        margin-bottom: 5px;
      }

      .deck-slot-cost {
        color: #9b59b6;
        font-size: 13px;
        font-weight: bold;
      }

      .deck-slot.empty {
        background: rgba(44, 62, 80, 0.5);
        border-style: dashed;
        justify-content: center;
      }

      .empty-slot-text {
        color: #7f8c8d;
        font-size: 12px;
        margin-bottom: 10px;
      }

      .empty-slot-plus {
        color: #7f8c8d;
        font-size: 36px;
      }

      .remove-card-btn {
        position: absolute;
        top: 5px;
        left: 5px;
        background: rgba(231, 76, 60, 0.9);
        color: white;
        border: none;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
      }

      .remove-card-btn:hover {
        background: rgba(231, 76, 60, 1);
        transform: scale(1.1);
      }

      .deck-actions {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
      }

      .available-cards-section {
        background: rgba(0, 0, 0, 0.3);
        padding: 25px;
        border-radius: 15px;
        border: 2px solid #9b59b6;
      }

      #available-cards-container {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        justify-content: center;
      }

      .available-card {
        transition: all 0.2s;
      }

      .available-card.in-deck {
        opacity: 0.6;
        border-color: #44ff44 !important;
      }

      .available-card.disabled {
        opacity: 0.4;
      }

      @keyframes fadeInOut {
        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        15% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        85% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
      }

      /* Mobile Optimizations */
      @media (max-width: 768px) {
        .game-title {
          font-size: 36px;
        }

        .menu-btn {
          width: 90%;
          padding: 18px;
          font-size: 18px;
          margin: 8px auto;
        }

        .card {
          width: 70px;
          padding: 8px;
        }

        .card img {
          height: 60px;
        }

        .card-name {
          font-size: 9px;
        }

        .card-cost, .card-level {
          width: 22px !important;
          height: 22px !important;
          font-size: 12px !important;
        }

        #elixir {
          bottom: 160px;
          right: 10px;
          padding: 10px;
          font-size: 20px;
        }

        #timer {
          font-size: 20px;
          padding: 8px 15px;
        }

        .crown-counter {
          font-size: 14px;
          padding: 8px 10px;
        }

        .deck-builder-title, .upgrade-title {
          font-size: 24px;
        }

        .deck-slot {
          min-height: 150px;
          padding: 10px;
        }

        .upgrade-card {
          width: 100%;
          max-width: 300px;
        }

        #cards-container {
          padding: 15px;
          gap: 15px;
        }

        .available-card {
          width: 120px;
          padding: 12px;
        }

        #selected-cards-container {
          grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
        }

        .section-title {
          font-size: 18px;
          flex-direction: column;
          align-items: flex-start;
          gap: 5px;
        }

        .vs-container {
          flex-direction: column;
          gap: 20px;
        }

        .player-card {
          min-width: 150px;
        }

        .modal-content {
          min-width: 90%;
          padding: 30px 20px;
        }
      }

      /* Touch target improvements */
      @media (hover: none) and (pointer: coarse) {
        .menu-btn, .card, button {
          -webkit-tap-highlight-color: rgba(52, 152, 219, 0.3);
        }

        .card {
          min-height: 100px;
        }

        button {
          min-height: 44px;
          padding: 12px 20px;
        }
      }

      /* Prevent zoom on double-tap */
      * {
        touch-action: manipulation;
      }

      #game-canvas {
        touch-action: none;
      }

      /* Keyboard Navigation Focus Styles */
      .keyboard-focused {
        outline: 3px solid #f39c12 !important;
        outline-offset: 3px;
        box-shadow: 0 0 15px rgba(243, 156, 18, 0.6) !important;
        position: relative;
        z-index: 10;
      }

      .menu-btn.keyboard-focused {
        transform: translateY(-2px) scale(1.05);
        background: linear-gradient(135deg, #f39c12, #e67e22) !important;
      }

      .menu-btn.secondary.keyboard-focused {
        background: linear-gradient(135deg, #f39c12, #e67e22) !important;
      }

      .deck-tab.keyboard-focused {
        transform: translateY(-4px);
        box-shadow: 0 6px 20px rgba(243, 156, 18, 0.8);
      }

      .available-card.keyboard-focused,
      .deck-slot.keyboard-focused {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 6px 20px rgba(243, 156, 18, 0.8);
      }

      input.keyboard-focused {
        border-color: #f39c12 !important;
        box-shadow: 0 0 20px rgba(243, 156, 18, 0.8) !important;
      }

      /* Keyboard navigation hint */
      .keyboard-hint {
        position: fixed;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: #f39c12;
        padding: 8px 15px;
        border-radius: 8px;
        font-size: 12px;
        z-index: 1000;
        pointer-events: none;
        border: 1px solid #f39c12;
      }
    </style>
  </head>
  <body>
    <canvas id="game-canvas"></canvas>
    <div id="ui-overlay">
      <!-- Main Menu -->
      <div id="main-menu">
        <div class="menu-container">
          <h1 class="game-title">CRYPTO MEME ROYALE</h1>
          <div class="player-info">
            <div class="player-name-display" id="player-name-display">Guest</div>
            <div class="player-stats">
              <div>Level: <span id="player-level">1</span></div>
              <div>üèÜ <span id="player-trophies">0</span></div>
              <div>üí∞ <span id="player-gold">500</span></div>
              <div>Wins: <span id="player-wins">0</span></div>
            </div>
          </div>
          <button class="menu-btn" id="play-btn">‚öîÔ∏è Find Battle</button>
          <button class="menu-btn secondary" id="deck-builder-btn">üé¥ Deck Builder</button>
          <button class="menu-btn secondary" id="view-cards-btn">‚ö° Upgrade Cards</button>
          <button class="menu-btn secondary" id="achievements-btn">üèÜ Achievements</button>
          <button class="menu-btn secondary" id="change-name-btn">‚úèÔ∏è Change Name</button>
          <button class="menu-btn secondary" id="settings-btn">‚öôÔ∏è Settings</button>
        </div>
      </div>

      <!-- Matchmaking Screen -->
      <div id="matchmaking-screen" style="display: none;">
        <div class="matchmaking-container">
          <h2 class="matchmaking-title">Finding Opponent...</h2>
          <div class="matchmaking-spinner">
            <div class="spinner"></div>
          </div>
          <p class="matchmaking-status" id="matchmaking-status">Searching for worthy opponent...</p>
          <button class="menu-btn secondary" id="cancel-matchmaking-btn">Cancel</button>
        </div>
      </div>

      <!-- Match Found Screen -->
      <div id="match-found-screen" style="display: none;">
        <div class="match-found-container">
          <h2 class="match-found-title">MATCH FOUND!</h2>
          <div class="vs-container">
            <div class="player-card">
              <div class="player-avatar">üë§</div>
              <div class="player-name" id="your-name">You</div>
              <div class="player-trophies">üèÜ <span id="your-trophies">0</span></div>
            </div>
            <div class="vs-text">VS</div>
            <div class="player-card enemy">
              <div class="player-avatar">ü§ñ</div>
              <div class="player-name" id="opponent-name">Opponent</div>
              <div class="player-trophies">üèÜ <span id="opponent-trophies">0</span></div>
            </div>
          </div>
          <p class="battle-starting">Battle starting...</p>
        </div>
      </div>

      <!-- Battle UI -->
      <div id="battle-ui" style="display: none;">
        <div id="timer">3:00</div>
        <div id="elixir">5/10</div>
        <div id="crowns">
          <div class="crown-counter" style="color: #e74c3c;">
            <span id="opponent-name-battle">Opponent</span><br>
            üëë <span id="enemy-crowns">0</span>
          </div>
          <div class="crown-counter" style="color: #3498db;">
            <span id="your-name-battle">You</span><br>
            üëë <span id="player-crowns">0</span>
          </div>
        </div>
        <div id="card-deck"></div>
      </div>

      <!-- Game Over Screen -->
      <div id="game-over">
        <h1 id="result-text">Victory!</h1>
        <div class="rewards-container">
          <div class="reward-item">
            <span class="reward-label">Trophies</span>
            <span class="reward-value" id="trophy-reward">+25 üèÜ</span>
          </div>
          <div class="reward-item">
            <span class="reward-label">Gold</span>
            <span class="reward-value" id="gold-reward">+50 üí∞</span>
          </div>
        </div>
        <button id="restart-btn" class="menu-btn">Return to Menu</button>
      </div>

      <!-- Name Input Modal -->
      <div id="name-modal" style="display: none;">
        <div class="modal-content">
          <h2>Enter Your Name</h2>
          <input type="text" id="name-input" placeholder="Your Name" maxlength="12">
          <div class="modal-buttons">
            <button class="menu-btn" id="save-name-btn">Save</button>
            <button class="menu-btn secondary" id="cancel-name-btn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Upgrade Screen -->
      <div id="upgrade-screen">
        <div class="upgrade-header">
          <div class="upgrade-title">‚ö° UPGRADE CARDS</div>
          <div class="upgrade-info">
            <div class="upgrade-gold-display">üí∞ <span id="upgrade-gold">500</span></div>
            <button class="menu-btn secondary" id="back-to-menu-btn">‚Üê Back</button>
          </div>
        </div>
        <div id="cards-container"></div>
      </div>

      <!-- Deck Builder Screen -->
      <div id="deck-builder-screen">
        <div class="deck-builder-header">
          <div class="deck-builder-title">üé¥ DECK BUILDER</div>
          <div id="deck-tabs"></div>
          <div style="text-align: center; margin-top: 10px;">
            <button class="menu-btn secondary" id="back-from-deck-btn">‚Üê Back to Menu</button>
          </div>
        </div>
        <div class="deck-builder-content">
          <div class="selected-cards-section">
            <div class="section-title">
              <span id="current-deck-name">Deck 1</span>
              <span style="font-size: 16px; color: #aaa;">8 Cards Required</span>
            </div>
            <div id="selected-cards-container"></div>
            <div class="deck-actions">
              <button class="menu-btn" id="save-deck-btn">üíæ Save Deck</button>
              <button class="menu-btn" id="set-active-deck-btn">‚öîÔ∏è Set as Active</button>
              <button class="menu-btn secondary" id="rename-deck-btn">‚úèÔ∏è Rename Deck</button>
            </div>
          </div>
          <div class="available-cards-section">
            <div class="section-title">
              <span>Available Cards</span>
              <span style="font-size: 16px; color: #aaa;">Click to Add</span>
            </div>
            <div id="available-cards-container"></div>
          </div>
        </div>
      </div>

      <!-- Rename Deck Modal -->
      <div id="rename-deck-modal" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); align-items: center; justify-content: center; z-index: 200;">
        <div class="modal-content">
          <h2>Rename Deck</h2>
          <input type="text" id="rename-deck-input" placeholder="Deck Name" maxlength="20" style="width: 100%; padding: 15px; font-size: 18px; border-radius: 10px; border: 2px solid #3498db; background: rgba(255, 255, 255, 0.1); color: #fff; margin-bottom: 20px; text-align: center;">
          <div class="modal-buttons">
            <button class="menu-btn" id="save-deck-name-btn">Save</button>
            <button class="menu-btn secondary" id="cancel-deck-name-btn">Cancel</button>
          </div>
        </div>
      </div>

      <!-- Settings Modal -->
      <div id="settings-modal" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); align-items: center; justify-content: center; z-index: 200;">
        <div class="modal-content">
          <h2>‚öôÔ∏è Settings</h2>
          
          <div style="text-align: left; margin-bottom: 20px;">
            <label style="color: #fff; display: block; margin-bottom: 10px; font-size: 18px; font-weight: bold;">üéµ Music</label>
            <button class="menu-btn" id="toggle-music-btn" style="width: 100%; margin-bottom: 10px;">Music: ON</button>
            <input type="range" id="music-volume" min="0" max="100" value="30" style="width: 100%; margin-bottom: 20px;">
            <div style="color: #aaa; font-size: 14px; margin-bottom: 20px;">Volume: <span id="music-volume-display">30</span>%</div>
          </div>

          <div style="text-align: left; margin-bottom: 20px;">
            <label style="color: #fff; display: block; margin-bottom: 10px; font-size: 18px; font-weight: bold;">üîä Sound Effects</label>
            <button class="menu-btn" id="toggle-sfx-btn" style="width: 100%; margin-bottom: 10px;">SFX: ON</button>
            <input type="range" id="sfx-volume" min="0" max="100" value="50" style="width: 100%; margin-bottom: 20px;">
            <div style="color: #aaa; font-size: 14px; margin-bottom: 20px;">Volume: <span id="sfx-volume-display">50</span>%</div>
          </div>

          <div class="modal-buttons">
            <button class="menu-btn secondary" id="close-settings-btn">Close</button>
          </div>
        </div>
      </div>

      <!-- Achievements Screen -->
      <div id="achievements-screen" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); flex-direction: column; z-index: 100; overflow-y: auto;">
        <div class="upgrade-header" style="position: sticky; top: 0; z-index: 101;">
          <div class="upgrade-title">üèÜ ACHIEVEMENTS</div>
          <div style="text-align: center; color: #f39c12; font-size: 18px; font-weight: bold; margin-bottom: 10px;">
            Progress: <span id="achievements-progress">0/0 (0%)</span>
          </div>
          <div style="text-align: center; margin-top: 10px;">
            <button class="menu-btn secondary" id="back-from-achievements-btn">‚Üê Back to Menu</button>
          </div>
        </div>
        <div id="achievements-container" style="padding: 30px;"></div>
      </div>

      <!-- Keyboard Navigation Hint -->
      <div id="keyboard-hint" class="keyboard-hint" style="display: none;">
        ‚å®Ô∏è Use ‚Üë‚Üì Arrow Keys to navigate, Enter to select, Esc to go back
      </div>
    </div>
    <script type="module" src="main.js"></script>
    <script src="https://storage.googleapis.com/rosebud_staticfiles/ChatManager.js"></script>
    <script src="https://storage.googleapis.com/rosebud_staticfiles/ImageGenerator.js"></script>
    <script src="https://storage.googleapis.com/rosebud_staticfiles/ProgressLogger.js"></script>
    <script src="https://storage.googleapis.com/rosebud_staticfiles/OGP.js"></script>
  </body>
</html>
